<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mystic Creatures Festival 2025</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: #fff;
        min-height: 100vh;
        font-size: 14px;
    }

    .header {
        text-align: center;
        padding: 15px;
        background: rgba(0,0,0,0.3);
        backdrop-filter: blur(10px);
        position: sticky;
        top: 0;
        z-index: 100;
    }

    .header h1 {
        font-size: 1.5em;
        margin-bottom: 10px;
        background: linear-gradient(45deg, #ff6b6b, #ffd93d, #6bcf7f, #4ecdc4);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .tabs {
        display: flex;
        gap: 8px;
        justify-content: center;
    }

    .tab {
        padding: 8px 16px;
        background: rgba(255,255,255,0.2);
        border: none;
        border-radius: 20px;
        color: white;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 12px;
        font-weight: 500;
    }

    .tab.active {
        background: rgba(255,255,255,0.4);
        transform: translateY(-1px);
    }

    .timetable-container {
        overflow-x: auto;
        margin: 10px;
        border-radius: 10px;
        background: rgba(0,0,0,0.2);
    }

    .day-section {
        margin-bottom: 20px;
    }

    .day-header {
        background: rgba(0,0,0,0.6);
        padding: 10px;
        text-align: center;
        font-weight: bold;
        font-size: 16px;
        margin-bottom: 10px;
        position: sticky;
        left: 0;
    }

    .timetable-grid {
        display: grid;
        gap: 1px;
        background: rgba(0,0,0,0.1);
        min-width: 800px;
    }

    .time-header {
        background: rgba(0,0,0,0.8);
        padding: 8px 4px;
        text-align: center;
        font-weight: 600;
        font-size: 10px;
        position: sticky;
        top: 70px;
        z-index: 20;
    }

    .stage-header {
        position: sticky;
        left: 0;
        background: rgba(0,0,0,0.8);
        padding: 8px;
        font-weight: 600;
        font-size: 10px;
        z-index: 30;
        display: flex;
        align-items: center;
    }

    .time-slot {
        background: rgba(255,255,255,0.05);
        padding: 4px;
        min-height: 40px;
        display: flex;
        flex-direction: column;
        gap: 2px;
    }

    .artist-block {
        background: rgba(255,255,255,0.15);
        border-radius: 4px;
        padding: 4px;
        cursor: pointer;
        transition: all 0.2s ease;
        position: relative;
        min-height: 35px;
        margin: 1px 0;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    .artist-block:hover {
        background: rgba(255,255,255,0.25);
        transform: scale(1.02);
    }

    .artist-block.liked {
        background: linear-gradient(45deg, #ff6b6b, #ff8e53);
        box-shadow: 0 0 8px rgba(255, 107, 107, 0.4);
    }

    .artist-block.break {
        background: rgba(100,100,100,0.3);
        font-style: italic;
        opacity: 0.6;
    }

    .like-btn {
        position: absolute;
        top: 1px;
        right: 1px;
        background: none;
        border: none;
        color: rgba(255,255,255,0.6);
        cursor: pointer;
        font-size: 10px;
        transition: all 0.2s ease;
        padding: 1px;
    }

    .like-btn:hover, .like-btn.liked {
        color: #ff6b6b;
        transform: scale(1.2);
    }

    .artist-name {
        font-weight: 600;
        font-size: 9px;
        line-height: 1.1;
        margin-bottom: 2px;
        padding-right: 12px;
    }

    .artist-time {
        font-size: 8px;
        opacity: 0.8;
        font-weight: 500;
    }

    .personal-timetable {
        display: none;
        margin: 10px;
        background: rgba(0,0,0,0.3);
        border-radius: 10px;
        padding: 15px;
    }

    .personal-timetable h2 {
        font-size: 1.2em;
        margin-bottom: 15px;
        text-align: center;
    }

    .personal-event {
        background: rgba(255,255,255,0.1);
        border-radius: 8px;
        padding: 12px;
        margin: 8px 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .event-details {
        flex: 1;
    }

    .event-artist {
        font-weight: 600;
        font-size: 14px;
    }

    .event-info {
        font-size: 11px;
        opacity: 0.8;
        margin-top: 3px;
    }

    .remove-btn {
        background: #ff6b6b;
        border: none;
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 11px;
    }

    .empty-state {
        text-align: center;
        opacity: 0.6;
        padding: 20px;
        font-size: 12px;
    }

    /* Stage Colors */
    .creatures-corner { border-left: 3px solid #ff6b6b; }
    .trance-temple { border-left: 3px solid #4ecdc4; }
    .freaky-forest { border-left: 3px solid #6bcf7f; }
    .cosmic-circus { border-left: 3px solid #ffd93d; }
    .funky-float { border-left: 3px solid #45b7d1; }
    .mystic-ground { border-left: 3px solid #96ceb4; }

    ::-webkit-scrollbar {
        height: 6px;
    }

    ::-webkit-scrollbar-track {
        background: rgba(255,255,255,0.1);
    }

    ::-webkit-scrollbar-thumb {
        background: rgba(255,255,255,0.3);
        border-radius: 3px;
    }
</style>

</head>
<body>
    <div class="header">
        <h1>üßôüèº‚Äç‚ôÇÔ∏è Mystic Creatures 2025 ‚ú®</h1>
        <div class="tabs">
            <button class="tab active" onclick="showTab('timetable')">Timetable</button>
            <button class="tab" onclick="showTab('personal')">My Schedule (<span id="liked-count">0</span>)</button>
        </div>
    </div>

<div id="timetable-view">
    <div class="timetable-container" id="timetable-container">
        <!-- Generated by JavaScript -->
    </div>
</div>

<div id="personal-view" class="personal-timetable">
    <h2>My Personal Schedule</h2>
    <div id="personal-events">
        <div class="empty-state">Click the ‚ù§Ô∏è on artists to add them to your schedule!</div>
    </div>
</div>

<script>
    const festivalData = {
        "Today": {
            "Creatures Corner üßôüèº‚Äç‚ôÇÔ∏è": [
                {time: "17:00", artist: "Katschinka"},
                {time: "19:30", artist: "zhart"},
                {time: "22:00", artist: "Tonda"}
            ],
            "Trance Temple ‚õ©Ô∏è": [
                {time: "18:00", artist: "KLATTE"},
                {time: "19:30", artist: "LUPA Charleen Herzig"},
                {time: "21:00", artist: "HNX"},
                {time: "22:30", artist: "Amo Hanne B"}
            ],
            "Freaky Forest üå≤": [
                {time: "18:00", artist: "LABERG b2b TAMTOOMI"},
                {time: "20:00", artist: "Vogti"},
                {time: "22:00", artist: "Marlene del Mar"}
            ]
        },
        "Friday, September 5": {
            "Creatures Corner üßôüèº‚Äç‚ôÇÔ∏è": [
                {time: "00:30", artist: "Witch Princess"},
                {time: "03:30", artist: "WAYHNA"},
                {time: "06:00", artist: "closing for a break", isBreak: true},
                {time: "11:00", artist: "neeks"},
                {time: "13:00", artist: "Pulli"},
                {time: "15:00", artist: "Acado"},
                {time: "17:00", artist: "Atric"},
                {time: "19:00", artist: "Deep √Ñndi"},
                {time: "20:00", artist: "R3NATA"},
                {time: "22:00", artist: "NUAH"},
                {time: "23:00", artist: "Sahra Bass"}
            ],
            "Trance Temple ‚õ©Ô∏è": [
                {time: "00:00", artist: "Antonym"},
                {time: "01:30", artist: "B√©lavie"},
                {time: "03:00", artist: "jojogigirl SACID"},
                {time: "04:30", artist: "Blossmbae"},
                {time: "06:00", artist: "closing for a break", isBreak: true},
                {time: "18:00", artist: "cbr Dr.Wiesl"},
                {time: "19:30", artist: "jeanska bbymeister"},
                {time: "21:00", artist: "subga Christopher Kono"},
                {time: "22:30", artist: "ONNY CHO"}
            ],
            "Freaky Forest üå≤": [
                {time: "00:00", artist: "Tom Cordes"},
                {time: "02:00", artist: "Kolja Broxi"},
                {time: "04:00", artist: "Schmackofatz & Spinneratz"},
                {time: "06:00", artist: "closing for a break", isBreak: true},
                {time: "16:30", artist: "Schwirri b2b BARTi"},
                {time: "19:00", artist: "Foolik"},
                {time: "21:00", artist: "Rafa'EL"},
                {time: "22:00", artist: "Bonnie Ford"}
            ],
            "Cosmic Circus üé™": [
                {time: "12:00", artist: "Isotob"},
                {time: "14:00", artist: "Mcfly"},
                {time: "16:00", artist: "Poppy"},
                {time: "18:00", artist: "FERNN"},
                {time: "19:00", artist: "Martin Ka"},
                {time: "21:00", artist: "Daniel Neuland"},
                {time: "23:00", artist: "Damon Jee"}
            ],
            "Funky Float üèñÔ∏è": [
                {time: "15:00", artist: "liquid luve"},
                {time: "17:00", artist: "Motshabi & Luko"},
                {time: "19:00", artist: "LIZZN"},
                {time: "21:00", artist: "Leo Schick"},
                {time: "23:00", artist: "Pippi KK"}
            ],
            "Mystic Ground ü™¨": [
                {time: "17:00", artist: "BadWolf"},
                {time: "19:00", artist: "Khainz"},
                {time: "21:00", artist: "TOWNSHIP REBELLION"},
                {time: "23:00", artist: "Taberia"}
            ]
        },
        "Saturday, September 6": {
            "Creatures Corner üßôüèº‚Äç‚ôÇÔ∏è": [
                {time: "01:00", artist: "REYNEKE"},
                {time: "02:00", artist: "Maria Theresia von Eberg"},
                {time: "04:00", artist: "Corios"},
                {time: "06:00", artist: "√úberhaupt & Au√üerdem"},
                {time: "08:00", artist: "tadoh"},
                {time: "10:00", artist: "seyde x awn x fotis"},
                {time: "11:00", artist: "Pacaya"},
                {time: "13:00", artist: "Lotte Ahoi"},
                {time: "15:00", artist: "Martha van Straaten"},
                {time: "17:00", artist: "neoBeo"},
                {time: "19:00", artist: "Haensen&Gretel"},
                {time: "21:00", artist: "Flave"},
                {time: "22:00", artist: "Horst Haller"}
            ],
            "Trance Temple ‚õ©Ô∏è": [
                {time: "00:00", artist: "DETOXX"},
                {time: "01:30", artist: "DJ Athina Y√ãDM"},
                {time: "03:00", artist: "Limoncello DJ Flink"},
                {time: "04:30", artist: "Balkhausen alemiko"},
                {time: "06:00", artist: "closing for a break", isBreak: true},
                {time: "18:00", artist: "Jini Piju"},
                {time: "19:30", artist: "myzelia"},
                {time: "21:00", artist: "4NOUK"},
                {time: "22:00", artist: "two girls one mom"},
                {time: "23:00", artist: "Millie Forsberg"}
            ],
            "Freaky Forest üå≤": [
                {time: "00:00", artist: "SILSAN"},
                {time: "02:00", artist: "DLZ b2b Phillinger"},
                {time: "04:00", artist: "CHIEF TORKEL & SAVETHEDISCO"},
                {time: "06:00", artist: "junoia"},
                {time: "08:00", artist: "closing for a break", isBreak: true},
                {time: "11:00", artist: "Gina Scirocco"},
                {time: "13:00", artist: "Lamara"},
                {time: "15:00", artist: "Temple Tears"},
                {time: "17:00", artist: "Mad Son"},
                {time: "19:00", artist: "Blake Strange"},
                {time: "21:00", artist: "RAUSCHHAUS"},
                {time: "23:00", artist: "Shabiki"}
            ],
            "Cosmic Circus üé™": [
                {time: "01:00", artist: "Moritz Butschek"},
                {time: "03:00", artist: "Tummetott & DirdyGerdi"},
                {time: "05:00", artist: "Sassafras Tree"},
                {time: "07:00", artist: "jungspund"},
                {time: "09:00", artist: "closing for a break", isBreak: true},
                {time: "10:00", artist: "Projekt Kiezchor"},
                {time: "11:00", artist: "enmaniguada"},
                {time: "13:00", artist: "closing for a break", isBreak: true},
                {time: "13:30", artist: "AFAR"},
                {time: "14:30", artist: "Swaytone"},
                {time: "16:30", artist: "Kahl & K√¶mena"},
                {time: "18:30", artist: "Fabian Krooss"},
                {time: "20:30", artist: "Oberst & Buchner"},
                {time: "22:30", artist: "Karlo Kurbel"}
            ],
            "Funky Float üèñÔ∏è": [
                {time: "01:00", artist: "iamhannahmai"},
                {time: "03:00", artist: "closing for a break", isBreak: true},
                {time: "10:00", artist: "Prinzhessin"},
                {time: "12:00", artist: "Nehbel"},
                {time: "14:00", artist: "Rafaelo"},
                {time: "16:00", artist: "FRYSCH"},
                {time: "18:00", artist: "Rob Roberts"},
                {time: "20:00", artist: "Hilden"},
                {time: "22:00", artist: "Ligal Tamir"}
            ],
            "Mystic Ground ü™¨": [
                {time: "01:00", artist: "Jan Oberlaender"},
                {time: "03:00", artist: "Pauli Pocket"},
                {time: "05:00", artist: "SYN3K"},
                {time: "07:00", artist: "closing for a break", isBreak: true},
                {time: "12:30", artist: "ShangoMx"},
                {time: "14:30", artist: "El Mundo & Zazou"},
                {time: "16:00", artist: "Oliver Koletzki"},
                {time: "18:00", artist: "Marcus Meinhardt"},
                {time: "20:00", artist: "Naicet & Elias Goldmund"},
                {time: "22:00", artist: "Konfusia"}
            ]
        },
        "Sunday, September 7": {
            "Creatures Corner üßôüèº‚Äç‚ôÇÔ∏è": [
                {time: "00:00", artist: "Frida Darko"},
                {time: "02:00", artist: "UREM"},
                {time: "04:00", artist: "Najesh & Arti≈°oko"},
                {time: "06:00", artist: "Kapoor"},
                {time: "08:00", artist: "Laaar"},
                {time: "09:00", artist: "WOJTEK"},
                {time: "10:00", artist: "Faul & Spaeth"},
                {time: "11:00", artist: "√©ner & stelzenl√§ufer"},
                {time: "13:00", artist: "Heimlich Kn√ºller"},
                {time: "15:45", artist: "closing for a break", isBreak: true},
                {time: "16:00", artist: "Monkyman"},
                {time: "17:00", artist: "CHOMBA"},
                {time: "18:00", artist: "Borella & Robin Dey"},
                {time: "20:00", artist: "Mira & Chris Schwarzw√§lder"},
                {time: "22:00", artist: "Tv√≠sker"}
            ],
            "Trance Temple ‚õ©Ô∏è": [
                {time: "00:00", artist: "ELOISA"},
                {time: "01:30", artist: "Shanixx"},
                {time: "03:00", artist: "Alexa Fluor"},
                {time: "04:30", artist: "elfie"},
                {time: "06:00", artist: "closing for a break", isBreak: true},
                {time: "18:00", artist: "Ponybarker"},
                {time: "19:30", artist: "Undercover Junkie"},
                {time: "21:00", artist: "Ivana Parti"},
                {time: "23:00", artist: "Praise"}
            ],
            "Freaky Forest üå≤": [
                {time: "01:00", artist: "TiM TASTE"},
                {time: "03:00", artist: "Rad.Lez"},
                {time: "05:00", artist: "JaMoll b2b Marco Liebreiz"},
                {time: "07:00", artist: "Lowrex"},
                {time: "09:00", artist: "Phauna"},
                {time: "11:00", artist: "Chips + Sekt"},
                {time: "13:00", artist: "Sydka & Bawab"},
                {time: "15:00", artist: "Bayawaka"},
                {time: "17:00", artist: "Joseph Disco"},
                {time: "19:00", artist: "Sabura"},
                {time: "21:00", artist: "Rachel Raw"},
                {time: "23:00", artist: "TAQTIK b2b Onory"}
            ],
            "Cosmic Circus üé™": [
                {time: "00:30", artist: "Ezio Aguiar"},
                {time: "02:30", artist: "MarMori"},
                {time: "04:30", artist: "Wanda Wild"},
                {time: "06:30", artist: "ELIXIR"},
                {time: "08:30", artist: "Sven Thomas"},
                {time: "10:30", artist: "closing for a break", isBreak: true},
                {time: "11:30", artist: "Crescendo Planet"},
                {time: "12:30", artist: "closing for a break", isBreak: true},
                {time: "13:00", artist: "SingSisySing üõ†"},
                {time: "14:00", artist: "Joanna Lenta"},
                {time: "16:00", artist: "Saraabb"},
                {time: "17:00", artist: "Joep Mencke"},
                {time: "19:00", artist: "Mimi Love"},
                {time: "21:00", artist: "Elias Dor√©"},
                {time: "23:00", artist: "Mona Pirzad"}
            ],
            "Funky Float üèñÔ∏è": [
                {time: "00:00", artist: "Nora Wolkenstein"},
                {time: "02:00", artist: "Frau Kaufmann b2b Dydaa Forne"},
                {time: "04:00", artist: "closing for a break", isBreak: true},
                {time: "11:00", artist: "Yusuf Lemone"},
                {time: "14:00", artist: "Cara Carpaccio"},
                {time: "16:00", artist: "Matteo Solero"},
                {time: "18:00", artist: "ciao 3lla"},
                {time: "20:00", artist: "Zerya"},
                {time: "22:00", artist: "Lili Hauser"}
            ],
            "Mystic Ground ü™¨": [
                {time: "00:00", artist: "Flanko"},
                {time: "02:00", artist: "Lamp√©"},
                {time: "04:00", artist: "Rick Pier O'Neil"},
                {time: "06:00", artist: "closing for a break", isBreak: true},
                {time: "12:00", artist: "Soso Klein"},
                {time: "14:00", artist: "Just Emma"},
                {time: "16:00", artist: "Melbo & Falke"},
                {time: "18:00", artist: "Aio"},
                {time: "20:00", artist: "Oliver Huntemann"},
                {time: "22:00", artist: "Maurice Mino & sin:port"}
            ]
        },
        "Monday, September 8": {
            "Creatures Corner üßôüèº‚Äç‚ôÇÔ∏è": [
                {time: "00:00", artist: "bƒ´su"},
                {time: "02:00", artist: "Pia Pan & Heyoka"},
                {time: "04:00", artist: "SIRU"},
                {time: "06:00", artist: "maaje"},
                {time: "08:00", artist: "thea & schtu"},
                {time: "09:00", artist: "Cedric Scheibel"},
                {time: "10:00", artist: "Lika"},
                {time: "12:00", artist: "Manucho"},
                {time: "14:00", artist: "Doob & Janoma"},
                {time: "17:00", artist: "closing", isBreak: true}
            ],
            "Trance Temple ‚õ©Ô∏è": [
                {time: "01:00", artist: "multivitaminmarie"},
                {time: "03:00", artist: "FAballert icouldfly"},
                {time: "04:30", artist: "DJ Holgersson"},
                {time: "06:00", artist: "closing for a break", isBreak: true},
                {time: "13:00", artist: "√âLAA"},
                {time: "15:00", artist: "J.WOCKENFUSS"},
                {time: "16:00", artist: "Kollektiv Sheesh"},
                {time: "18:00", artist: "Pascale Voltaire"},
                {time: "20:00", artist: "closing", isBreak: true}
            ],
            "Freaky Forest üå≤": [
                {time: "01:00", artist: "Breger"},
                {time: "03:00", artist: "PLEASURE ISLAND"},
                {time: "05:00", artist: "Nickel"},
                {time: "06:00", artist: "closing", isBreak: true}
            ],
            "Cosmic Circus üé™": [
                {time: "01:00", artist: "Robin Schellenberg"},
                {time: "03:00", artist: "CREAM"},
                {time: "05:00", artist: "F.I.E.L.D.Y"},
                {time: "07:00", artist: "closing", isBreak: true}
            ],
            "Funky Float üèñÔ∏è": [
                {time: "00:00", artist: "Lulu Malina"},
                {time: "02:00", artist: "Natanael Megersa"},
                {time: "04:00", artist: "Onix"},
                {time: "06:00", artist: "Konrad Sturm"},
                {time: "09:00", artist: "Zehlendorfer Disco Squad"},
                {time: "12:00", artist: "closing", isBreak: true}
            ],
            "Mystic Ground ü™¨": [
                {time: "00:00", artist: "TraumaMia"},
                {time: "02:00", artist: "closing", isBreak: true}
            ]
        }
    };

    let likedEvents = JSON.parse(localStorage.getItem('likedEvents') || '[]');

    function getStageClass(stageName) {
        const stageMap = {
            'Creatures Corner üßôüèº‚Äç‚ôÇÔ∏è': 'creatures-corner',
            'Trance Temple ‚õ©Ô∏è': 'trance-temple',
            'Freaky Forest üå≤': 'freaky-forest',
            'Cosmic Circus üé™': 'cosmic-circus',
            'Funky Float üèñÔ∏è': 'funky-float',
            'Mystic Ground ü™¨': 'mystic-ground'
        };
        return stageMap[stageName] || '';
    }

    function timeToMinutes(timeStr) {
        const [hours, minutes] = timeStr.split(':').map(Number);
        return hours * 60 + minutes;
    }

    function calculateSetDuration(events, currentIndex) {
        if (currentIndex >= events.length - 1) return 90;
        
        const currentTime = timeToMinutes(events[currentIndex].time);
        const nextTime = timeToMinutes(events[currentIndex + 1].time);
        
        if (nextTime < currentTime) {
            return (24 * 60 - currentTime) + nextTime;
        }
        
        return nextTime - currentTime;
    }

    function generateTimetable() {
        const container = document.getElementById('timetable-container');
        
        const timeSlots = [];
        for (let hour = 0; hour < 24; hour++) {
            timeSlots.push(`${hour.toString().padStart(2, '0')}:00`);
            timeSlots.push(`${hour.toString().padStart(2, '0')}:30`);
        }
        
        let html = '';
        
        Object.entries(festivalData).forEach(([day, dayData]) => {
            const stages = Object.keys(dayData);
            
            html += `
                <div class="day-section">
                    <div class="day-header">${day}</div>
                    <div class="timetable-grid" style="grid-template-columns: 100px repeat(${timeSlots.length}, 60px);">
                        <div class="stage-header">Stage</div>
            `;
            
            timeSlots.forEach(time => {
                html += `<div class="time-header">${time}</div>`;
            });
            
            stages.forEach(stage => {
                const stageClass = getStageClass(stage);
                html += `<div class="stage-header ${stageClass}">${stage}</div>`;
                
                const events = dayData[stage] || [];
                const processedSlots = new Set();
                
                timeSlots.forEach((time, timeIndex) => {
                    if (processedSlots.has(timeIndex)) {
                        return;
                    }
                    
                    const event = events.find(e => e.time === time);
                    
                    if (event) {
                        const eventIndex = events.indexOf(event);
                        const duration = calculateSetDuration(events, eventIndex);
                        const slotsToSpan = Math.ceil(duration / 30);
                        
                        const eventId = `${day}-${stage}-${event.time}-${event.artist}`;
                        const isLiked = likedEvents.some(e => e.id === eventId);
                        const isBreak = event.isBreak || event.artist.includes('closing');
                        
                        for (let i = 0; i < slotsToSpan && (timeIndex + i) < timeSlots.length; i++) {
                            processedSlots.add(timeIndex + i);
                        }
                        
                        html += `
                            <div class="time-slot" style="grid-column: span ${Math.min(slotsToSpan, timeSlots.length - timeIndex)};">
                                <div class="artist-block ${isLiked ? 'liked' : ''} ${isBreak ? 'break' : ''}" data-event-id="${eventId}">
                                    ${!isBreak ? `<button class="like-btn ${isLiked ? 'liked' : ''}" onclick="toggleLike('${eventId}', '${event.artist.replace(/'/g, "\\'")}', '${stage.replace(/'/g, "\\'")}', '${day}', '${event.time}')">${isLiked ? '‚ù§Ô∏è' : '‚ô°'}</button>` : ''}
                                    <div class="artist-name">${event.artist}</div>
                                    <div class="artist-time">${event.time} (${duration}min)</div>
                                </div>
                            </div>
                        `;
                    } else {
                        html += '<div class="time-slot"></div>';
                    }
                });
            });
            
            html += `</div></div>`;
        });
        
        container.innerHTML = html;
    }

    function toggleLike(eventId, artist, stage, day, time) {
        const existingIndex = likedEvents.findIndex(e => e.id === eventId);
        
        if (existingIndex > -1) {
            likedEvents.splice(existingIndex, 1);
        } else {
            likedEvents.push({ id: eventId, artist, stage, day, time });
        }
        
        localStorage.setItem('likedEvents', JSON.stringify(likedEvents));
        updateLikeButtons();
        updatePersonalSchedule();
        updateLikedCount();
    }

    function updateLikeButtons() {
        document.querySelectorAll('.artist-block').forEach(block => {
            const eventId = block.dataset.eventId;
            const isLiked = likedEvents.some(e => e.id === eventId);
            const likeBtn = block.querySelector('.like-btn');
            
            if (likeBtn) {
                likeBtn.classList.toggle('liked', isLiked);
                block.classList.toggle('liked', isLiked);
            }
        });
    }

    function updatePersonalSchedule() {
        const container = document.getElementById('personal-events');
        
        if (likedEvents.length === 0) {
            container.innerHTML = '<div class="empty-state">Click the ‚ù§Ô∏è on artists to add them to your schedule!</div>';
            return;
        }
        
        const sortedEvents = likedEvents.sort((a, b) => {
            const dayOrder = {'Today': 0, 'Friday, September 5': 1, 'Saturday, September 6': 2, 'Sunday, September 7': 3, 'Monday, September 8': 4};
            if (dayOrder[a.day] !== dayOrder[b.day]) return dayOrder[a.day] - dayOrder[b.day];
            return a.time.localeCompare(b.time);
        });
        
        container.innerHTML = sortedEvents.map(event => `
            <div class="personal-event">
                <div class="event-details">
                    <div class="event-artist">${event.artist}</div>
                    <div class="event-info">${event.stage} ‚Ä¢ ${event.day} ‚Ä¢ ${event.time}</div>
                </div>
                <button class="remove-btn" onclick="toggleLike('${event.id}', '${event.artist.replace(/'/g, "\\'")}', '${event.stage.replace(/'/g, "\\'")}', '${event.day}', '${event.time}')">Remove</button>
            </div>
        `).join('');
    }

    function updateLikedCount() {
        document.getElementById('liked-count').textContent = likedEvents.length;
    }

    function showTab(tab) {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelector(`[onclick="showTab('${tab}')"]`).classList.add('active');
        
        if (tab === 'timetable') {
            document.getElementById('timetable-view').style.display = 'block';
            document.getElementById('personal-view').style.display = 'none';
        } else {
            document.getElementById('timetable-view').style.display = 'none';
            document.getElementById('personal-view').style.display = 'block';
            updatePersonalSchedule();
        }
    }

    function scrollToCurrentTime() {
        const now = new Date();
        const currentHour = now.getHours();
        const currentMinute = now.getMinutes();
        
        // Calculate which time slot to scroll to (30-minute intervals)
        const timeSlotIndex = currentHour * 2 + (currentMinute >= 30 ? 1 : 0);
        
        // Find the timetable container
        const container = document.querySelector('.timetable-container');
        if (container) {
            // Each time slot is 60px wide + 1px gap
            const scrollPosition = timeSlotIndex * 61;
            container.scrollLeft = scrollPosition;
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
        generateTimetable();
        updateLikedCount();
        updatePersonalSchedule();
        scrollToCurrentTime();
    });
</script>

</body>
</html>